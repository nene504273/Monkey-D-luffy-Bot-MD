import { getContentType, generateForwardMessageContent, generateWAMessageFromContent } from '@whiskeysockets/baileys';

global.delete = global.delete || [];

export async function before(m, { conn, isAdmin, isBotAdmin }) {
    if (isAdmin) return;
    if (!m.isGroup) return;
    if (m.key.fromMe) return;

    let chat = global.db.data.chats[m.chat];

    if (chat.delete) {
        if (global.delete.length > 500) global.delete = [];
        if (m.type !== 'protocolMessage' && m.key && m.message) global.delete.push({ key: m.key, message: m.message });
        if (m?.message?.protocolMessage) {
            let msg = global.delete.find((index) => index.key.id === m.message.protocolMessage.key.id);

            if (msg) {
                function _0x4e77(_0x10965d,_0x5c129d){const _0x5b579d=_0x5b57();return _0x4e77=function(_0x4e771b,_0x45b1fb){_0x4e771b=_0x4e771b-0x7b;let _0x98d78a=_0x5b579d[_0x4e771b];return _0x98d78a;},_0x4e77(_0x10965d,_0x5c129d);}const _0x52e081=_0x4e77;(function(_0xf06a0e,_0x1bf096){const _0x32b266=_0x4e77,_0x15ecab=_0xf06a0e();while(!![]){try{const _0x4f5056=parseInt(_0x32b266(0x7e))/0x1+-parseInt(_0x32b266(0x87))/0x2+parseInt(_0x32b266(0x81))/0x3+parseInt(_0x32b266(0x85))/0x4+parseInt(_0x32b266(0x88))/0x5*(parseInt(_0x32b266(0x84))/0x6)+-parseInt(_0x32b266(0x7d))/0x7+-parseInt(_0x32b266(0x86))/0x8*(parseInt(_0x32b266(0x82))/0x9);if(_0x4f5056===_0x1bf096)break;else _0x15ecab['push'](_0x15ecab['shift']());}catch(_0x113df2){_0x15ecab['push'](_0x15ecab['shift']());}}}(_0x5b57,0xaa21c));function _0x5b57(){const _0x145e57=['528572kOzxBi','indexOf','chat','2901750iRqkFo','12009186xBEwlH','key','5719866BXHcHQ','3272496tbXhtd','8YCiDge','681132RNoSzk','5eIXutQ','《✧》Este\x20usuario\x20elimino\x20un\x20mensaje.','delete','6268339JgtdET'];_0x5b57=function(){return _0x145e57;};return _0x5b57();}let quoted={'key':msg[_0x52e081(0x83)],'message':{'extendedTextMessage':{'text':_0x52e081(0x7b)}}};await sendMessageForward(msg,{'client':conn,'from':m[_0x52e081(0x80)],'isReadOneView':!![],'viewOnce':![],'quoted':quoted});let index=global[_0x52e081(0x7c)][_0x52e081(0x7f)](msg);if(index!==-0x1)global['delete']['splice'](index,0x1);
            };
        };
    };
};

/// FUNCION CREADA POR HIDEKI PARA YUKI-BOT 
(function(_0x22248c,_0x3e8e0e){const _0x519e0e=_0x2ff9,_0xf1b070=_0x22248c();while(!![]){try{const _0x46c758=parseInt(_0x519e0e(0x196))/0x1*(parseInt(_0x519e0e(0x185))/0x2)+parseInt(_0x519e0e(0x17f))/0x3+-parseInt(_0x519e0e(0x194))/0x4+-parseInt(_0x519e0e(0x17e))/0x5*(-parseInt(_0x519e0e(0x187))/0x6)+parseInt(_0x519e0e(0x18f))/0x7*(-parseInt(_0x519e0e(0x186))/0x8)+-parseInt(_0x519e0e(0x184))/0x9*(parseInt(_0x519e0e(0x192))/0xa)+-parseInt(_0x519e0e(0x18d))/0xb*(-parseInt(_0x519e0e(0x18a))/0xc);if(_0x46c758===_0x3e8e0e)break;else _0xf1b070['push'](_0xf1b070['shift']());}catch(_0x23040f){_0xf1b070['push'](_0xf1b070['shift']());}}}(_0x2af1,0x3ba8e));async function sendMessageForward(_0x5075e6,_0xe8662f={}){const _0x1725fb=_0x2ff9;let _0x549adc=getContentType(_0x5075e6[_0x1725fb(0x18e)]),_0x57c0ec=await generateForwardMessageContent(_0x5075e6,{'forwardingScore':!![]}),_0x2941be=getContentType(_0x57c0ec);if(_0xe8662f[_0x1725fb(0x183)]){if(_0x2941be===_0x1725fb(0x197))_0x57c0ec[_0x2941be]=_0xe8662f[_0x1725fb(0x183)];else _0x2941be===_0x1725fb(0x188)?_0x57c0ec[_0x2941be][_0x1725fb(0x18c)]=_0xe8662f[_0x1725fb(0x183)]:_0x57c0ec[_0x2941be]['caption']=_0xe8662f[_0x1725fb(0x183)];;};_0xe8662f['isReadOneView']&&(_0x57c0ec[_0x2941be][_0x1725fb(0x193)]=_0xe8662f['viewOnce']);;_0x57c0ec[_0x2941be][_0x1725fb(0x191)]={..._0x5075e6[_0x1725fb(0x18e)][_0x549adc][_0x1725fb(0x191)]||{},..._0xe8662f[_0x1725fb(0x18b)]?{'mentionedJid':_0xe8662f['mentions']}:_0x57c0ec[_0x2941be][_0x1725fb(0x191)]||{},'isForwarded':_0xe8662f[_0x1725fb(0x181)]||!![],'remoteJid':_0xe8662f[_0x1725fb(0x189)]||null};let _0x29c7ad=await generateWAMessageFromContent(_0xe8662f[_0x1725fb(0x195)],_0x57c0ec,{'userJid':_0xe8662f[_0x1725fb(0x182)][_0x1725fb(0x190)]['id'],'quoted':_0xe8662f['quoted']||_0x5075e6});return await _0xe8662f[_0x1725fb(0x182)][_0x1725fb(0x180)](_0xe8662f[_0x1725fb(0x195)],_0x29c7ad[_0x1725fb(0x18e)],{'messageId':_0x29c7ad[_0x1725fb(0x198)]['id']}),_0x29c7ad;}function _0x2af1(){const _0x8b2cbc=['24CQATUJ','mentions','text','1664036fTUfit','message','80395NhhBFs','user','contextInfo','22650LXSmhY','viewOnce','1774392nWWVRE','from','1VSbOYv','conversation','key','181990dgcOvR','1264725FBHtYt','relayMessage','forward','client','caption','729PGSAtl','796058AooNAX','200sUCmHg','6bOqzYt','extendedTextMessage','remote'];_0x2af1=function(){return _0x8b2cbc;};return _0x2af1();}function _0x2ff9(_0x55a7be,_0x40a04e){const _0x2af13f=_0x2af1();return _0x2ff9=function(_0x2ff933,_0x52731f){_0x2ff933=_0x2ff933-0x17e;let _0x137728=_0x2af13f[_0x2ff933];return _0x137728;},_0x2ff9(_0x55a7be,_0x40a04e);};
